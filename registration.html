<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="img/logoEco.svg">
    <link rel="stylesheet" href="css/login.css">
    <title>EcoFarm SignIn</title>
    <script>
         var text = '{"account":[{"nickname":"QUY KHANG","username":"quykhang831", "password":"Kh@ng831"},{"nickname":"Quý Khang Huỳnh","username":"admin831", "password":"831Kh@ng"}]}';

        const accountList = JSON.parse(text);

        function logInValidation(){
            var frm = document.forms['loginForm'];
            var username = frm.fullname.value;
            var password = frm.psw.value;

            accountList.account.forEach(function(e){
                    if(username == e.username && password == e.password){
                        window.localStorage.setItem(username, e.nickname);
                        window.location.href = "index.html";
                        alert("You're logged in!");
                        e.stopPropagation();
                        return true;
                }
            });

            alert("Invalid username/password combination");
            return false;
        }
    </script>
</head>
<body>
    <a href="index.html"><img id="logoEco" src="img/LogoLogin.svg" alt=""></a>
    <div class="container">
        <form name="loginForm" action="index.html" method="post" id="login" class="form form-hidden" enctype="application/x-www-form-urlencoded" onsubmit="return logInValidation()">
            <h1 class="form-title">LOG IN</h1>
            <h3 class="form-slogan">Join EcoFarm for our better farm</h3>
            <!-- <div class="form-message form-error"></div> -->
            <div class="form-input-group">
                <label for="fullname" class="form-label">Email</label>
                <input required type="text" id="fullname" name="fullname" class="form-input" autofocus placeholder="Enter your username or email">
                <div class="form-input-error-message"></div>
            </div>
            <div class="form-input-group">
                <label for="psw" class="form-label">Password</label>
                <input required type="password" id="psw" name="psw" class="form-input" autofocus placeholder="Password">
                <div class="form-input-error-message"></div>
            </div>
            <button class="form-button" type="submit">Continue</button>
            <p class="form-text">
                <a href="#" class="form-link">Forgot your password?</a>
            </p>
            <p class="form-text">
                <a href="#" class="form-link" id="linkCreateAccount">Don't have an account? Create account</a>
            </p>
        </form>
        <form class="form" id="createAccount">
            <h1 class="form-title">SIGN IN</h1>
            <h3 class="form-slogan">Join EcoFarm for our better farm</h3>
            <div class="form-message form-error"></div>
            <div class="form-input-group">
                <label for="fullname" class="form-label">Username</label>
                <input required type="text" id="signupUsername" class="form-input" autofocus placeholder="Enter your full name">
                <div class="form-input-error-message"></div>
            </div>
            <div class="form-input-group">
                <label for="signupEmail" class="form-label">Email</label>
                <input required type="email" id="signupEmail" class="form-input" autofocus placeholder="Email Address">
                <div class="form-input-error-message"></div>
            </div>
            <div class="form-input-group">
                <label for="signupPassword" class="form-label">Password</label>
                <input required type="password" id="signupPassword" class="form-input" autofocus placeholder="Password">
                <div class="form-input-error-message"></div>
            </div>
            <div class="form-input-group">
                <label for="signupPassword2" class="form-label">Confirmed password</label>
                <input required type="password" id="signupPassword2" class="form-input" autofocus placeholder="Confirm password">
                <div class="form-input-error-message"></div>
            </div>
            <button class="form-button" type="submit">Continue</button>
            <p class="form-text">
                <a href="#" class="form-link" id="linkLogin">Already have an account? Sign in</a>
            </p>
        </form>
    </div>

    <script src="js/login.js"></script>
</body>
</html>